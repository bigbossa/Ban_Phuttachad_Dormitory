# การแก้ไขการเรียงลำดับ Tenant List ตามเลขห้อง

## ภาพรวม

ได้แก้ไขการเรียงลำดับข้อมูลใน Tenant List ให้เรียงตามเลขห้องแทนที่จะเรียงตาม roomId (UUID) เพื่อให้ผู้ใช้สามารถค้นหาผู้เช่าได้ง่ายขึ้น

## ปัญหาที่พบ

เดิมระบบใช้ `Object.entries(tenantsByRoom)` ซึ่งจะเรียงลำดับตาม roomId (UUID) ทำให้การแสดงผลไม่เป็นลำดับที่เข้าใจง่ายสำหรับผู้ใช้

## การแก้ไข

### ไฟล์ที่แก้ไข

`src/pages/TenantsPage.tsx`

### ส่วนที่แก้ไข

```typescript
// เดิม
return Object.entries(tenantsByRoom).map(([roomId, tenants]) => {
  // ... code
});

// ใหม่ - เพิ่มการเรียงลำดับ
// เรียงลำดับตามเลขห้อง
const sortedRooms = Object.entries(tenantsByRoom).sort(
  ([, tenantsA], [, tenantsB]) => {
    const roomA = tenantsA.find((t) => t.residents === "ผู้เช่า")?.current_room;
    const roomB = tenantsB.find((t) => t.residents === "ผู้เช่า")?.current_room;

    // ถ้าไม่มีห้อง ให้เรียงไว้ท้ายสุด
    if (!roomA && !roomB) return 0;
    if (!roomA) return 1;
    if (!roomB) return -1;

    // เรียงตามเลขห้อง (แปลงเป็นตัวเลขเพื่อเรียงลำดับที่ถูกต้อง)
    const roomNumberA = parseInt(roomA.room_number) || 0;
    const roomNumberB = parseInt(roomB.room_number) || 0;
    return roomNumberA - roomNumberB;
  }
);

return sortedRooms.map(([roomId, tenants]) => {
  // ... code
});
```

## วิธีการทำงาน

### 1. การเรียงลำดับ

- ใช้ `Array.sort()` เพื่อเรียงลำดับข้อมูล
- หาผู้เช่าหลัก (residents === "ผู้เช่า") ของแต่ละห้อง
- ดึงเลขห้องจาก `current_room.room_number`

### 2. การจัดการกรณีพิเศษ

- **ไม่มีห้อง**: เรียงไว้ท้ายสุด
- **เลขห้องเป็นตัวอักษร**: ใช้ `parseInt()` แปลงเป็นตัวเลข
- **เลขห้องไม่ถูกต้อง**: ใช้ค่า 0 เป็นค่าเริ่มต้น

### 3. การเรียงลำดับ

- ใช้การเปรียบเทียบตัวเลข: `roomNumberA - roomNumberB`
- ผลลัพธ์: เรียงจากน้อยไปมาก (ห้อง 1, 2, 3, ...)

## ผลลัพธ์

### ก่อนแก้ไข

- เรียงตาม roomId (UUID) - ไม่เป็นลำดับที่เข้าใจง่าย
- ห้อง 101 อาจแสดงก่อนห้อง 1
- ยากต่อการค้นหาผู้เช่าในห้องที่ต้องการ

### หลังแก้ไข

- เรียงตามเลขห้อง - เป็นลำดับที่เข้าใจง่าย
- ห้อง 1, 2, 3, ..., 101, 102, ...
- ง่ายต่อการค้นหาผู้เช่าในห้องที่ต้องการ

## ประโยชน์

1. **ง่ายต่อการใช้งาน**: ผู้ใช้สามารถค้นหาผู้เช่าได้ง่ายขึ้น
2. **เป็นระเบียบ**: ข้อมูลแสดงเป็นลำดับที่เข้าใจง่าย
3. **ประหยัดเวลา**: ไม่ต้องเลื่อนหาในรายการที่ไม่เป็นลำดับ
4. **เป็นมาตรฐาน**: ตรงกับความคาดหวังของผู้ใช้ทั่วไป

## หมายเหตุ

- การเรียงลำดับจะทำงานทุกครั้งที่มีการโหลดข้อมูล
- ไม่มีผลกระทบต่อประสิทธิภาพของระบบ
- รองรับทั้งเลขห้องที่เป็นตัวเลขและตัวอักษร
- กรณีไม่มีห้องจะแสดงไว้ท้ายสุดเสมอ
